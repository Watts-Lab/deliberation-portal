<!-- For help on using this template, see the blog post: http://mechanicalturk.typepad.com/blog/2014/04/editing-the-survey-link-project-template-in-the-ui.html --><!-- Bootstrap v3.0.3 -->
<link
  href="https://s3.amazonaws.com/mturk-public/bs30/css/bootstrap.min.css"
  rel="stylesheet"
/>
<section
  class="container"
  id="SurveyLink"
  style="
    margin-bottom: 15px;
    padding: 10px 10px;
    font-family: Verdana, Geneva, sans-serif;
    color: #333333;
    font-size: 0.9em;
  "
>
  <div class="row col-xs-12 col-md-12">
    <!-- Instructions -->
    <div class="panel panel-primary">
      <div class="panel-heading"><strong>Instructions</strong></div>

      <div class="panel-body">
        <p>
          This is a test of a recruitment strategy that pays you part way though
          an ongoing experiment.
        </p>

        <p>
          <strong
            >Make sure to leave this window open as you complete the survey.
          </strong>
          When you are finished, you will return to this page to paste the code
          into the box.
        </p>

        <p
          style="
            font-size: 0.9em;
            font-style: italic;
            background-color: #eeeeee;
            padding: 10px;
          "
        >
          <strong>Template note for Requesters </strong>- To verify that Workers
          actually complete your survey, require each Worker to enter a
          <span style="text-decoration: underline">unique</span> survey
          completion code to your HIT. Consult with your survey service provider
          on how to generate this code at the end of your survey.
        </p>
      </div>
    </div>
    <!-- End Instruction -->

    <table>
      <tbody>
        <tr>
          <td><strong>Survey link:</strong></td>
          <td>
            <div
              id="myelementLink"
              style="display: inline; font-family: Verdana"
            >
              <p>
                URL not shown because there is an error with Javascript on your
                computer. To perform this HIT, you must have Javascript and
                cookies enabled on your browser.
              </p>
            </div>
            <script type="text/javascript" language="JavaScript">
              const studyURL =
                "https://watts-lab.github.io/deliberation-portal/turkReturnTest/";
              const assignment_id_field =
                document.getElementById("myelementLink");

              const urlParams = new URLSearchParams(window.location.search);
              if (!urlParams.get("workerId")) {
                // https://docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_ExternalQuestionArticle.html#ApiReference_ExternalQuestionArticle-the-external-form
                assignment_id_field.innerHTML =
                  "<tt>The link will appear here after you accept this HIT.</tt>";
              } else {
                assignment_id_field.innerHTML = `<a target="_blank" href="${studyURL.toString()}?${urlParams.toString()}"><h1><span style="color: rgb(255, 0, 0);"><span style="font-family: Courier New;"><b>Click here to begin!</b></span></span></h1></a>`;
              }
            </script>

            <div class="link" id="linkDiv">&nbsp;</div>
          </td>
        </tr>
        <tr>
          <td><strong>Provide the survey code here:</strong></td>
          <td style="vertical-align: middle">
            <input
              class="form-control"
              id="surveycode"
              name="surveycode"
              placeholder="e.g. 123456"
              type="text"
            />
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</section>
<!-- close container section -->
<style type="text/css">
  td {
    font-size: 1em;
    padding: 5px 5px;
  }
</style>
